{% extends 'base.html.twig' %}

{% block body %}

<div class="container">

    <h3 class="h3 mb-3 font-weight-normal">{{ question.title }}</h3>
    <p>Question posé par 
        <span class="strong">{{ question.user.userName }}</span> le
        <span class="strong">{{ question.createdAt | date('Y-m-d') }}</span>
    </p>
    <p>{{ question.body }}</p>

{% for response in question.responses %}

    <div class="card bg-light mb-3 question-container">
        <div class="card-header">Réponse le <span class="strong">{{ response.createdAt | date('Y-m-d') }}</span> par <span class="strong">{{ response.user.userName }}</span></div>
        <div class="card-body">
            <p class="card-text">{{ response.body }}</p>
        </div>
    </div>

{% endfor %}

{% if is_granted(['ROLE_ADMIN', 'ROLE_USER']) %}

<h3>Répondre à la question</h3>

{{ form_start(responseForm, { 'attr' : { 'class': 'form-container' } }) }}
    <div class="my-custom-class-for-errors">
        {{ form_errors(responseForm) }}
    </div>

    <div class="form-group row">
        <div class="col-sm-10">
            {{ form_widget(responseForm.body, { 'attr': { 'class' : 'form-control form-response', 'placeholder' : 'Répondre à la question'}} ) }}
        </div>
    </div>
    <div>
        {{ form_widget(responseForm.save, { 'attr': { 'class' : 'btn btn-primary'}} ) }}
    </div>
{{ form_end(responseForm) }}

{% endif %}

</div>

{% endblock %}